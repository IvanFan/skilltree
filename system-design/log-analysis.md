Chat

user table sql

friends table sql

channel table private/public channel sql

message table nosql

Add a memory database redis cache

1m users chat

**how to save the traffic and bandwidth?**

single machine socket connection ![](/assets/Screen Shot 2018-07-04 at 12.26.14 pm.png)10k

Package multiple message together. So reduce the header and footer

disk byte

network bit

Write through

Write bite

compress function can be separate

broadcaster performance add limit

Offline user

![](/assets/Screen Shot 2018-07-04 at 12.33.58 pm.png)

**friend status:**

Notification:

web socket, poll, long-polling

if user login/logout often, delay change for 5 second

